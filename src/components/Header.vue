<template>
    <!-- å…¬å…±å¤´éƒ¨ -->
    <!-- https://bulma.io/documentation/layout/hero/ -->
    <div id="c_header">
        <section class="hero is-medium is-primary -gradient-bg">
            <!-- Hero head: will stick at the top -->
            <div class="hero-head">
                <!-- (æ–°ç‰ˆæœ¬å·²ä¿®å¤)buefy v0.8.10 navbarç»„ä»¶å­˜åœ¨æ²¡æœ‰fixed-topå±æ€§åˆ‡æ¢è·¯ç”±æŠ¥vue warn removeçš„ä¸€ä¸ªé”™è¯¯ï¼ŒåŠ ä¸Šåé¦–æ¬¡è¿›å…¥é¦–é¡µæ— èƒŒæ™¯è‰² -->
                <b-navbar type="is-primary" class="-nav-gradient-bg is-primary" fixed-top>
                    <template slot="brand">
                        <b-navbar-item tag="router-link" :to="{ path: '/' }">
                            <h2 class="is-size-4">PORTFOLIO</h2>
                            <!-- <img -->
                            <!--    src="../assets/logo.png" -->
                            <!--    alt="aaa" -->
                            <!-- > -->
                        </b-navbar-item>
                    </template>
                    <template slot="end">
                        <b-navbar-item tag="router-link" :to="{path: '/works'}">
                            <b-icon
                                    icon="apps"
                                    size="is-medium"
                            >
                            </b-icon>
                            <span class="is-size-5">ä½œå“&demo</span>
                        </b-navbar-item>
                        <b-navbar-item tag="router-link" :to="{path: '/contact'}">
                            <!-- https://buefy.org/documentation/icon -->
                            <b-icon
                                    pack="mdi"
                                    icon="account-box"
                                    size="is-medium"
                            >
                            </b-icon>
                            <span class="is-size-5">è”ç³»æˆ‘</span>
                        </b-navbar-item>
                    </template>

                    <!-- todo ç§»åŠ¨ç«¯ èœå•å›¾æ ‡ä¸ºé»‘è‰²ä¸‰æ¨ªæ ï¼Œåº”è¯¥ç”¨æ’æ§½æ”¹æˆç™½è‰²ã€‚navitemå†…å®¹å±…ä¸­ã€‚-->
                </b-navbar>
            </div>

            <!-- Hero content: will be in the middle -->
            <div class="hero-body">
                <div class="container has-text-centered fade-enter-active">
                    <!-- å¤§æ ‡é¢˜ -->
                    <h1 class="title is-size-1 has-text-white">
                        ğŸ‘‹Hello, I'm YZ!
                    <!--  è™½ç„¶åº”è¯¥å¤§èƒ†æ¨å¹¿ä½†è¿˜æ˜¯æœ‰ç‚¹æ‹›æ‘‡ã€‚ã€‚ -->
                    <!--  ğŸ‘‹<img src="../assets/fonts/ä½ å¥½æˆ‘æ˜¯æ¨é“®_å¾®è½¯ä»¿å®‹.svg"> -->
                    </h1>
                    <h2 class="subtitle is-size-4 has-text-white-lighter "
                        :class="{'-typing-animation': isShowAnimation}"
                        @mouseenter="replayAnimation"
                        @mouseleave="clearTimeout"
                    >
                        {{ subtitleContent }}
                    </h2>
                    <h3 class="subtitle is-size-6 has-text-white-lighter">
                        <b-icon icon="map-marker" size="is-small"></b-icon>éƒ‘å·
                    </h3>
                </div>
            </div>

            <!-- Hero footer: will stick at the bottom -->
            <div class="hero-foot">
                <!-- æ‹·è´è‡ª https://yandev.de/contact ä»–çš„æ•ˆæœæœ€å¥½ï¼Œsvgè´Ÿè´£æ›²çº¿ï¼Œæ­é…äº†cssç¼©æ”¾å’ŒåŠ¨ç”» -->
                <!-- todo åŸä½œè€…æ„é€ äº†å¾ˆé•¿çš„pathä¸ºäº†å±å¹•æ˜¾ç¤º100%ï¼Œå¹¶ç”¨cssç¼©æ”¾è¿›è¡Œä¿®é¥°ï¼Œç¬¬ä¸‰å±‚èƒŒæ™¯æ²¡åŠ¨ã€‚å¦‚æœåƒjsä¸­å·²è¢«æ³¨é‡Šçš„å¦ä¸€ç§æ–¹æ³•è‡ªåŠ¨æ„é€ æ›²çº¿æ›´å¥½ã€‚-->
                <div  style="transform: rotate(180deg) scale(2, 1); margin-top: 1px;" class="">
                    <svg  viewBox="0 0 1600 100" class="separator">
                        <path  d="M0 0v64c35 13 59 31 125 31 104 0 104-44 209-44s105 44 209 44 105-44 209-44 105 44 209 44 105-44 209-44 106 44 209 44 105-44 209-44h12V0z" class="step1"></path>
                        <path  d="M610 77c39 0 39-25 77-25s38 25 76 25 39-25 77-25 38 25 76 25 39-25 77-25 38 25 76 25 39-25 77-25 38 25 76 25 38-25 77-25 38 25 76 25 38-25 76-25 39 25 77 25c32 0 37-18 62-24V0H15v77h9c36 0 37-25 73-25s37 25 74 25 36-25 73-25 37 25 73 25 37-25 74-25 36 25 73 25 37-25 73-25 37 25 74 25" class="step2"></path>
                        <path  d="M0 0v69c25-12 37-32 80-32 60 0 60 40 120 40s60-40 120-40 60 40 120 40 60-40 120-40 60 40 120 40 60-40 120-40 61 40 120 40 60-40 120-40 60 40 120 40 60-40 120-40 60 40 120 40 60-40 120-40c42 0 55 20 80 32V0z" class="step3"></path>
                    </svg>
                </div>
            </div>
        </section>

    </div>
</template>

<script>
    export default {
        name: "Header",
        data: function () {
            return {
                subtitleContent: 'ä¸€ä½å–œæ¬¢æ¢ç©¶æ–°äº‹ç‰©çš„å…¨æ ˆå·¥ç¨‹å¸ˆ',  // 15å­—
                isShowAnimation: true,
                timer: null,
            }
        },
        methods: {
            sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms))
            },
            // é¼ æ ‡æ‚¬åœé‡æ”¾æ‰“å­—åŠ¨ç”»å°å½©è›‹
            replayAnimation() {
                this.timer = setTimeout(async ()=>{
                    this.isShowAnimation = false
                    // åˆ é™¤class åŠ¨ç”»æ ·å¼å†æ·»åŠ å¯é‡æ”¾åŠ¨ç”»ï¼Œä½†å¿…é¡»é—´éš”çŸ­æš‚å»¶è¿Ÿä¸ç„¶æ¡†æ¶ååº”ä¸è¿‡æ¥
                    await this.sleep(100)
                                        // 'ä¸€ä½å–œæ¬¢æ¢ç©¶æ–°äº‹ç‰©çš„å…¨æ ˆå·¥ç¨‹å¸ˆ'
                    this.subtitleContent = 'è¢«ç”Ÿæ´»æ‰€è¿«å•¥éƒ½å­¦çš„å…¨å¹²å‹äººæ‰ğŸ˜­',
                    this.isShowAnimation = true
                }, 3000)
            },
            clearTimeout() {
                clearTimeout(this.timer)
                this.timer = null
            },

            // æ³¢æµªç‰¹æ•ˆ(åºŸå¼ƒ æ•ˆæœä¸å¤Ÿå®Œç¾,ä»£ç åŸç†æŒºæ¸…æ™°)
            // çº¯svg https://segmentfault.com/a/1190000010627039
            // æˆ–svgé™æ€æ³¢æµª(AIç»˜åˆ¶åå¯¼å‡ºsvg)+cssåŠ¨ç”»
            // githubä¸Šæ‰¾äº†ä¸€ä¸ª çº¯svgç„¶åå°è£…çš„ (åŸºäºdomæ“ä½œ)https://github.com/SheldonLaw/svg-wave/blob/master/demo2.html
            // æ²¡æœ‰æ‰¾åˆ°å…¶å®ƒæ•ˆæœæ›´åˆé€‚çš„vueç»„ä»¶
            genWaves(){
                // ç»„ä»¶é…ç½®
                var colors = ['rgba(255,255,255,1)', 'rgba(255,255,255,0.6)'],
                    componentWidth = "100%", // ç»„ä»¶å®½åº¦ï¼Œint or 100%(ç›¸å½“äºçˆ¶å…ƒç´ çš„å®½åº¦)
                    componentHeight = "80";// ç»„ä»¶é«˜åº¦ï¼Œint or 100%
                // æ³¢æµªé…ç½®
                var width = 200,		// å®½åº¦
                    height = 40,		// é«˜åº¦
                    deepth = 50,		// æ·±åº¦
                    speed = 1, 			// é€Ÿåº¦ï¼Œå…³é”®ï¼šéœ€è¦æ»¡è¶³ width * 2 % speed == 0ï¼Œå¦åˆ™æ³¢æµªæ— æ³•æ­£å¸¸å½’ä½
                    speedOffset = 1,
                    focus = 0.5, 		// æ³¢å³°é›†ä¸­ç¨‹åº¦ [-1, 1]
                    offset = -width * 0.8, 	// ä¸åŒæ³¢æµªçš„å·®
                    waveCount = 5;  	// æ³¢æµªæ•°
                var x = [0, offset];
                var cacheData = ["", ""];

                var svgWave = document.querySelector('#svg-area');
                var paths = svgWave.querySelectorAll('path');
                var path1 = paths[0], path2 = paths[1];

                // é…ç½®
                config();
                var oldFunc = window.onresize;
                window.onresize = function() {
                    oldFunc && oldFunc();
                    config(true);
                }

                // å¯åŠ¨
                requestAnimationFrame(wave);

                function config(resize) {
                    cacheData = ["",""];
                    svgWave.setAttribute('width', componentWidth);
                    svgWave.setAttribute('height', componentHeight);
                    var pxWidth = componentWidth == "100%" ? svgWave.parentNode.clientWidth : componentWidth;
                    waveCount = Math.ceil(pxWidth/width/2) + 1; // + 1æ˜¯è€ƒè™‘åˆ°ç¬¬äºŒä¸ªæ³¢æµªå‘å·¦ç§»ï¼Œéœ€è¦é¢„ç•™å®½åº¦
                    if (resize == true) return;
                    path1.setAttribute('fill', colors[0]);
                    path2.setAttribute('fill', colors[1]);

                }

                function wave() {
                    path1.setAttribute('d', generateData(0));
                    path2.setAttribute('d', generateData(1));
                    x[0] -= speed;
                    x[1] -= (speed + speedOffset);
                    requestAnimationFrame(wave);
                }
                // åŠ¨æ€ç”Ÿæˆpath.d
                function generateData(index) {
                    // èµ·ç‚¹
                    // é‡ç½®èµ·ç‚¹å½¢æˆå¾ªç¯
                    if (x[index] % (width * 2) == 0) {
                        x[index] = 0;
                    }
                    var startX = x[index],
                        startY = height;
                    var start = [startX, startY].join(',');

                    if (cacheData[index] == "") {
                        // æ³¢æµª = è´å¡å°”æ›²çº¿ç»„åˆï¼ˆæ­£ + å€’ï¼‰
                        var c_x1 = width / 4 * (focus + 1),
                            c_y1 = - height / 2,
                            c_y2 = - height / 2,
                            c_x2 = width  - c_x1,
                            c_x = width,
                            c_y = 0;
                        var curvetoUp =  [c_x1, c_y1, c_x2, c_y2, c_x, c_y].join(' ');
                        c_y1 = c_y2 = height / 2;
                        var curvetoDown =  [c_x1, c_y1, c_x2, c_y2, c_x, c_y].join(' ');
                        var curvetoData = "";
                        for(var i=0; i<waveCount; i++) {
                            curvetoData = curvetoData + 'c' + curvetoUp + 'c' + curvetoDown;
                        }

                        // é—­åˆ
                        var end = 'l0,' + deepth + ' l-' + waveCount * width * 2 + ',0Z'
                        cacheData[index] = [curvetoData, end].join('');
                    }
                    return ['M', start, cacheData[index]].join('');
                }
            }
        }
    }


    // æ‰“å­—ç‰¹æ•ˆã€‚ï¼ˆåºŸå¼ƒï¼Œæ•ˆæœè¿˜æ˜¯çº¯csså¥½ï¼‰
    // export default {
    //     name: "Header",
    //     data() {
    //         return{
    //             subtitle: 'ä¸€ä½å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆ',
    //             subtitle2: ''
    //         }
    //     },
    //     methods: {
    //
    //         // setTimeOut()å¼‚æ­¥æ‰§è¡Œ, forå¾ªç¯ä¸‹ä½¿ç”¨å¯¼è‡´é€»è¾‘é—®é¢˜ã€‚
    //         // timeouté€’å½’ https://blog.csdn.net/frank_fong/article/details/81567439
    //         // promiseå°è£…timeoutï¼ˆç»ˆäºæœ‰åƒpython time.sleepçš„ä¸œè¥¿äº†ã€‚ã€‚ï¼‰ https://stackoverflow.com/questions/951021/what-is-the-javascript-version-of-sleep
    //         sleep(ms) {
    //             return new Promise(resolve => setTimeout(resolve, ms))
    //         },
    //         async typing(){
    //             for(let i=0; i<this.subtitle.length; i++) {
    //                 this.subtitle2 = this.subtitle.slice(0, i) + '';
    //                 await this.sleep(200)
    //             }
    //             let _this = this
    //             setInterval(function() {
    //                 console.log(_this, _this.subtitle2.endsWith('|'))
    //                 if (_this.subtitle2.endsWith('|')){
    //                     _this.subtitle2 = _this.subtitle2.replace('|', ' ')
    //                 }else {
    //                     _this.subtitle2 += '|'
    //                 }
    //             }, 2000)
    //         }
    //
    //     },
    //     mounted: function() {
    //         // this.typing()
    //     }
    // }

</script>

<style scoped>
    /*@import "../assets/fonts/Pacifico.ttf";*/

    .-nav-gradient-bg {
        background-color: transparent !important;
        background-image: linear-gradient(45deg, rgba(95, 174, 247, 0.95) 5%, rgba(151, 8, 204, 0.95) 95%) !important;
    }
    .-gradient-bg{
        /* æ¸å˜èƒŒæ™¯
           è‰²ç¯ç›¸è·60åº¦ï¼Œé«˜é¥±å’Œï¼Œå†·æš–å¹³è¡¡ï¼Œæ—¶å°šé’ç´«æ¸å˜
           https://webkul.github.io/coolhue/
        */
        /*background-image: linear-gradient(45deg, #0aabc7, #bb09d3)*/
        background-image: linear-gradient(45deg, #43CBFF 5%, #9708CC 95%);
    }
    .hero.is-medium .hero-body{
        padding-top: 5rem !important;
        padding-bottom: 4rem !important;
    }

    /* å¤§æ ‡é¢˜ Hello, I'm YZ */
    @font-face {
        font-family: Pacifico;
        src: url("~@/assets/fonts/Pacifico.ttf");
    }
    .hero.is-medium .hero-body h1.title.is-size-1 {
        font-family: Pacifico, cursive;
        font-weight: bold;
        margin-bottom: 2rem;
    }
    /* æ‰“å­—ç‰¹æ•ˆ
       æ•™ç¨‹æ€è·¯å·§å¦™ https://www.weiyiqi.net/html/htmlcss/326.html
                  https://www.zhangxinxu.com/wordpress/2018/06/css3-animation-steps-step-start-end/?shrink=1
       ä»¿yandevçš„æ•ˆæœ
    */
    @keyframes typecursor {
        50% {
            border-color: transparent;
        }
    }
    @keyframes typetext {
        from {
            width: 0;/*å®¹å™¨å®½åº¦ from 0(é®ä½æ‰€æœ‰å­—ç¬¦), to æ€»å®½åº¦*/
        }
    }
    .-typing-animation {
        width: 16em;   /*æ–‡å­—å®¹å™¨å®½åº¦ã€‚chä¸€è‹±æ–‡å­—ç¬¦å®½åº¦ï¼Œä¸€æ±‰å­—çº¦2chã€‚chå®é™…æ•ˆæœå¹¶ä¸å‡†ï¼Œæœ€ç»ˆç”¨emã€‚æ¡†æ¶å­—ä½“1emï¼Œä¹˜å­—æ•°*/
        border-right: solid 4px rgba(249, 249, 249, 0.8);/*å®¹å™¨å³è¾¹ç¼˜ä½œä¸ºå…‰æ ‡*/
        white-space: nowrap;/*cssæ–¹å¼è¦æ±‚æ–‡æœ¬åªèƒ½ä¸€è¡Œ*/
        overflow: hidden;
        font: 1em monospace;/*è‹±æ–‡æœ€å¥½ç­‰å®½å­—ä½“ï¼Œä¸­æ–‡ä¸æ··ç”¨åŠè§’å­—ç¬¦ä»¥è·å¾—æœ€ä½³æ•ˆæœ*/
        animation: typetext 3s steps(30) 2s 1 normal both,/*æ•ˆæœå®Œæˆæ—¶é—´ï¼Œæ–‡å­—æ•ˆæœå»¶è¿Ÿ2sï¼Œä¸¤è¾¹åŒæ—¶å±•å¼€åŠ¨æ•ˆ*/
                   typecursor 1s infinite ease-out ;/*å¦‚æœä¸æƒ³å…‰æ ‡è¿‡æ¸¡ï¼Œstep-endè¿‡åº¦ç¦æ­¢åŠ¨æ•ˆã€‚stepséè¿ç»­åŠ¨ç”» å€¼å¤§äºå­—æ•°ä¸ç”¨å¤ªç²¾ç¡®*/
    }
    .hero-body .subtitle.is-size-4{
        margin: -1em auto 0 auto !important;
    }

    /* æ³¢æµªç‰¹æ•ˆ */
    .step1 {
        opacity: .25;
        fill: #fff;
    }
    .step2 {
        opacity: .5;
        fill: #fff;
        animation: dividerAnimation2 120s linear infinite;
    }
    .step3 {
        opacity: 1;
        fill: #fff;
        animation: dividerAnimation1 120s linear infinite;
    }

    @keyframes dividerAnimation1 {
        0% {
            transform: translate(-25%)
        }
        50% {
            transform: translate(25%)
        }
        to {
            transform: translate(-25%)
        }
    }

    @keyframes dividerAnimation2 {
        0% {
            transform: translate(18%, 5%) scaleX(1.25)
        }
        50% {
            transform: translate(-18%, 5%) scaleX(1.25)
        }
        to {
            transform: translate(18%, 5%) scaleX(1.25)
        }
    }

    @keyframes dividerAnimation3 {
        0% {
            transform: translate(-8%, 10%)
        }
        50% {
            transform: translate(8%, 10%)
        }
        to {
            transform: translate(-8%, 10%)
        }
    }
</style>